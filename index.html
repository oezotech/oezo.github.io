<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OEZO VR 眼镜展示</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.0/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background: #333;
            height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        #container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #logo-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40%;
            height: auto;
            z-index: 100;
            pointer-events: none;
            opacity: 1;
            transition: opacity 1s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .oezo-logo {
            width: 100%;
            height: auto;
            /* 移除滤镜效果，保持原始颜色 */
        }
        
        #vr-scene {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 50;
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(40, 40, 40, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            transition: opacity 1s ease;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #ffffff;
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .studio-light {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
            z-index: 5;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="container">
        <!-- 加载覆盖层 -->
        <div class="loading-overlay" id="loading-overlay">
            <div class="spinner"></div>
        </div>
        
        <!-- Logo容器 -->
        <div id="logo-container">
            <svg class="oezo-logo" viewBox="0 0 612 242.4" xmlns="http://www.w3.org/2000/svg">
                <path fill="#000" d="M601.3,91.3c-4.7-4.5-11.8-7-18.2-6.4c-2,0.3-4.4-1.3-4.9-3.3c-7.4-22.2-23.3-44.2-44.2-59.1c-21-14.9-47-22.8-70.3-22.5
	H148.5c-23.3-0.3-49.4,7.6-70.3,22.5c-21,14.9-36.9,37-44.2,59.1c-0.5,1.9-2.9,3.5-4.9,3.3c-6.4-0.6-13.6,2-18.2,6.4
	c-4.8,4.3-7.8,11.3-7.7,17.7v24.2c-0.1,6.5,2.9,13.4,7.7,17.7c4.7,4.5,11.8,7,18.2,6.4c2-0.3,4.4,1.3,4.9,3.3
	c5.8,17.1,16.2,33.8,29.9,47.2c13.7,13.3,30.6,23.3,47.9,28.8c17.2,5.6,36.8,7.2,55.7,4.2c18.9-3-37-10.6-51.7-21.2
	c12-8.7,27.5-13.7,42.4-13.6h89c14.9-0.1,30.4,4.9,42.4,13.6c14.7,10.6,32.8,18.2,51.7,21.2c18.9,3,38.5,1.4,55.7-4.2
	c17.3-5.4,34.2-15.4,47.9-28.8c13.7-13.3,24.1-30.1,29.9-47.2c0.5-1.9,2.9-3.5,4.9-3.3l1.7,0.1c5.7,0.2,12.5-2.4,17.1-7.1
	c4.7-4.7,7.2-11.5,7.1-17.1v-24.2C609.1,102.6,606.1,95.7,601.3,91.3z M65.3,167.2c-1.5-0.2-2.9-1.3-3.6-2.6
	c-8.6-16.7-12.3-38.4-9-58.9s13.7-39.9,27.1-53c13.1-13.5,32.5-23.8,53-27.1c20.5-3.3,42.2,0.4,58.9,9c1.3,0.6,2.4,2.1,2.6,3.6
	c0.3,1.5-0.3,3.2-1.4,4.2l-20.3,20.3c-1.2,1.3-3.4,1.8-5,1.2c-10-3.5-22-4.2-33.2-1.6c-11.2,2.6-21.6,8.6-29,16.1
	c-7.6,7.4-13.5,17.8-16.1,29c-2.6,11.2-1.9,23.1,1.6,33.2c0.6,1.6,0.1,3.8-1.2,5l-20.3,20.3C68.5,166.9,66.8,167.5,65.3,167.2z
	 M559.6,134c-3.3,24.5-16.7,47.5-33.4,61.1c-16.1,14.2-41.1,23.7-65.7,23c-24.7-0.8-49-11.8-64.2-27c-0.9-0.8-2.1-1.4-3.4-1.4H251.9
	c-1.8,0.1-3.9-1.3-4.5-3c-0.8-1.7-0.3-4.1,1.1-5.3l67.8-67.8l18.7-45.1c0.6-1.4,0.4-3.3-0.4-4.5c-0.8-1.3-2.5-2.2-4-2.2H244
	c-1.2,0-2.6,0.5-3.4,1.4l-6,6c-1.5,1.3-1.9,4.1-0.8,5.7c9.5,17,13.8,39.6,10.5,61c-3.3,21.4-14.3,41.6-28.5,54.9
	c-13.8,13.7-34.4,23.9-55.9,26.5c-21.5,2.5-43.9-2.7-60.6-12.8c-5.6-3.3-10.8-7.1-15.6-11.4c-1-0.8-1.6-2.2-1.6-3.5
	c-0.1-1.3,0.5-2.7,1.4-3.6L230.5,39.1c0.9-0.9,2.2-1.4,3.4-1.4h146.6c1.8-0.1,3.9,1.3,4.5,3c0.8,1.7,0.3,4.1-1.1,5.3l-67.8,67.8
	l-18.7,45.1c-0.6,1.4-0.4,3.3,0.4,4.5c0.8,1.3,2.5,2.2,4,2.2h67.6c1.5,0,3.2-0.9,4-2.2c0.9-1.3,1.1-3.2,0.4-4.6
	c-8.7-19.6-10.3-46.3-2.2-69.6c8.1-23.3,26-43.2,45-53.1c18.6-10.7,45-14.9,69-9.2c24,5.7,45.6,21.4,57.4,39.4
	C556,83.8,562.9,109.6,559.6,134z"/>
                <path fill="#000" d="M524.1,121.2c0.4-14.1-6-31.1-17.7-42.8c-11.7-11.7-28.7-18.1-42.8-17.7c-14.1-0.4-31.1,6-42.8,17.7
	c-11.7,11.7-18.1,28.7-17.7,42.8c-0.4,14.1,6,31.1,17.7,42.8c11.7,11.7,28.7,18.1,42.8,17.7c14.1,0.4,31.1-6,42.8-17.7
	C518.1,152.3,524.5,135.3,524.1,121.2z"/>
                <path fill="#000" d="M207.4,107c5.2,19.2-1.6,43.4-16.1,57c-13.7,14.5-37.8,21.3-57,16.1c-1.6-0.3-3.1-1.8-3.5-3.4c-0.5-1.6,0-3.6,1.2-4.7
	l67.3-67.3c1.1-1.2,3.2-1.7,4.7-1.2C205.6,103.9,207,105.4,207.4,107z"/>
            </svg>
        </div>
        
        <!-- VR场景容器 -->
        <div id="vr-scene"></div>
        
        <!-- 工作室灯光效果 -->
        <div class="studio-light"></div>
    </div>

    <script>
        // 全局变量
        let scene, camera, renderer, model;
        let logoVisible = true; // 跟踪Logo是否可见
        
        // 初始化函数
        function init() {
            // 创建场景
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x333333); // 灰色背景
            
            // 创建相机 - 确保模型居中
            camera = new THREE.PerspectiveCamera(
                45,
                window.innerWidth / window.innerHeight,
                0.1,
                1000
            );
            camera.position.set(0, 0, 8);
            
            // 创建渲染器
            renderer = new THREE.WebGLRenderer({ 
                antialias: true,
                alpha: false,
                powerPreference: "high-performance"
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.outputEncoding = THREE.sRGBEncoding;
            renderer.physicallyCorrectLights = true;
            document.getElementById('vr-scene').appendChild(renderer.domElement);
            
            // 创建工作室风格灯光
            // 1. 环境光 - 提供基础照明
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
            scene.add(ambientLight);
            
            // 2. 主光源 - 45度角照射
            const keyLight = new THREE.DirectionalLight(0xffffff, 1.0);
            keyLight.position.set(5, 5, 5);
            scene.add(keyLight);
            
            // 3. 补光 - 从另一侧补充照明
            const fillLight = new THREE.DirectionalLight(0xffffff, 0.5);
            fillLight.position.set(-5, 5, 5);
            scene.add(fillLight);
            
            // 4. 背光 - 增加轮廓感
            const backLight = new THREE.DirectionalLight(0xffffff, 0.7);
            backLight.position.set(0, 0, -5);
            scene.add(backLight);
            
            // 5. 柔光灯 - 顶部照射
            const topLight = new THREE.DirectionalLight(0xffffff, 0.6);
            topLight.position.set(0, 5, 0);
            scene.add(topLight);
            
            // 加载模型
            loadModel();
            
            // 添加窗口大小变化监听
            window.addEventListener('resize', onWindowResize);
            
            // 添加鼠标事件
            setupMouseEvents();
        }
        
        // 设置鼠标事件
        function setupMouseEvents() {
            let isDragging = false;
            let previousMousePosition = {
                x: 0,
                y: 0
            };
            
            const container = document.getElementById('vr-scene');
            
            container.addEventListener('mousedown', (e) => {
                // 仅在Logo消失后允许拖拽
                if (!logoVisible) {
                    isDragging = true;
                }
            });
            
            container.addEventListener('mousemove', (e) => {
                // 仅在Logo消失后允许旋转
                if (isDragging && model && !logoVisible) {
                    const deltaMove = {
                        x: e.offsetX - previousMousePosition.x,
                        y: e.offsetY - previousMousePosition.y
                    };
                    
                    model.rotation.y += deltaMove.x * 0.01;
                    model.rotation.x += deltaMove.y * 0.01;
                }
                
                previousMousePosition = {
                    x: e.offsetX,
                    y: e.offsetY
                };
            });
            
            window.addEventListener('mouseup', () => {
                isDragging = false;
            });
            
            // 触摸事件支持
            container.addEventListener('touchstart', (e) => {
                if (!logoVisible) {
                    isDragging = true;
                    previousMousePosition = {
                        x: e.touches[0].clientX,
                        y: e.touches[0].clientY
                    };
                }
            });
            
            container.addEventListener('touchmove', (e) => {
                if (isDragging && model && !logoVisible) {
                    const deltaMove = {
                        x: e.touches[0].clientX - previousMousePosition.x,
                        y: e.touches[0].clientY - previousMousePosition.y
                    };
                    
                    model.rotation.y += deltaMove.x * 0.01;
                    model.rotation.x += deltaMove.y * 0.01;
                    
                    previousMousePosition = {
                        x: e.touches[0].clientX,
                        y: e.touches[0].clientY
                    };
                }
            });
            
            container.addEventListener('touchend', () => {
                isDragging = false;
            });
        }
        
        // 加载模型函数
        function loadModel() {
            // 使用GLTFLoader加载模型
            const loader = new THREE.GLTFLoader();
            
            // 加载名为vr_headset.glb的模型
            loader.load(
                'vr_headset.glb',
                (gltf) => {
                    model = gltf.scene;
                    scene.add(model);
                    
                    // 调整模型位置和大小 - 30倍缩放
                    model.position.set(0, 0, 0);
                    model.scale.set(30, 30, 30);
                    
                    // 确保材质正确显示
                    model.traverse((child) => {
                        if (child.isMesh) {
                            if (child.material) {
                                // 设置材质属性以配合工作室灯光
                                child.material.metalness = 0.5;
                                child.material.roughness = 0.3;
                                child.material.envMapIntensity = 1.0;
                            }
                        }
                    });
                    
                    // 隐藏加载覆盖层
                    gsap.to("#loading-overlay", {
                        opacity: 0,
                        duration: 0.8,
                        onComplete: () => {
                            document.getElementById('loading-overlay').style.display = 'none';
                            
                            // 开始动画
                            startAnimation();
                        }
                    });
                },
                (xhr) => {
                    // 加载进度更新 - 无文字显示
                },
                (error) => {
                    console.error('模型加载错误:', error);
                    // 5秒后重试
                    setTimeout(loadModel, 5000);
                }
            );
        }
        
        // 开始动画
        function startAnimation() {
            // 模型和Logo同时出现
            gsap.to("#logo-container", {
                opacity: 1,
                duration: 1
            });
            
            // 2秒后Logo淡出
            setTimeout(() => {
                gsap.to("#logo-container", {
                    opacity: 0,
                    duration: 1.5,
                    ease: "power2.out",
                    onComplete: () => {
                        logoVisible = false; // Logo已消失
                    }
                });
            }, 2000);
            
            // Logo消失前模型保持静止
            // Logo消失后模型旋转180°
            setTimeout(() => {
                gsap.to(model.rotation, {
                    y: Math.PI,
                    duration: 3,
                    ease: "power2.inOut"
                });
            }, 4000); // Logo淡出后开始旋转
            
            // 视角推进
            setTimeout(() => {
                gsap.to(camera.position, {
                    z: 2.5,
                    duration: 2.5,
                    ease: "power1.out"
                });
            }, 4000);
        }
        
        // 窗口大小变化处理
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        // 动画循环
        function animate() {
            requestAnimationFrame(animate);
            
            // 仅在Logo消失后添加自动旋转
            if (model && !logoVisible) {
                model.rotation.y += 0.002;
            }
            
            renderer.render(scene, camera);
        }
        
        // 页面加载完成后初始化
        window.addEventListener('load', () => {
            init();
            animate();
        });
    </script>
</body>
</html>
